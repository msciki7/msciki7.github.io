---
title: "User(로그인 & 로그아웃 등 회원 관리 전반적 부분)"
date: 2025-12-30
categories:
  - SISC-Web
---

# 인증(Authentication)이란 무엇인가?

인증(Authentication)은 이 사용자가 누구인지 확인하는 과정이다.

예시

- ID / 비밀번호 로그인
- 소셜 로그인(Kakao, Google)
- 토큰 검증(JWT)


# 인가(Authorization)란 무엇인가?

인가(Authorization)는 ‘이 사용자가 이 기능을 사용할 수 있는지 판단하는 과정’이다.

예시

- 로그인한 사용자만 글 작성 가능
- ADMIN만 관리자 페이지 접근 가능


처음에는 로그인만 되면 모든 게 끝난 줄 알았따. 하지만 실제로는 로그인 이후에도 매 용청마다 이 사용자가 인증된 상태인지, 권한이 있는지 계속 확인해야 했다.



인증과 인가를 구분하지 못한 상태에서는 Spring Security 설정과 JWT 흐름이 왜 필요한지 이해하기 어려웠다. 



- 인증은 한 번
- 인가는 매 요청마다


# User entity



User 엔티티는 회원 파트 전체의 기준점(anchor)이 된다.



User는 판단의 주체가 아니라 판단의 대상이다. 



User 엔티티 전체 코드



## 필드별 설계 의도



### userId(UUID)

- 사용자 식별자의 최종 기준
- email 변경 여부와 무관하게 사용자 식별 가능
- JWT payload에 넣기 적합
로그인 이후에는 email이 아니라 userID를 기준으로 사용자를 식별한다.



### email(nullable)

- LOCAL 로그인 사용자: emil  사용
- OAuth 사용자: email 없이도 User 생성 가능
로그인 수단과 사용자 개념을 분리한 설계(email=사용자로 고정하지 않음)



### passwordHash

- 암호화된 비밀번호 저장
- User는 비밀번호를 검증하지 않음
- Security 가 PasswordEncoder로 검증
User는 값만 보관한다.



### role (인가의 기준)

- USER / ADMID / TEAM_MEMBER 등
- 로그인 이후 접근 권한 판단 기준
인증(Authentication)이 끝난 뒤 인가(Authorization)에서 핵심적으로 사용된다.



### Oauth 계정 연동

- 하나의 User 에 여러 OAuth 계정 연결 가능
- 로그인 수단 ≠ 사용자 구조
LOCAL / Kakao / Google 로그인 모두 같은 User 로 구결될 수 있



### User 엔티티의 역할 정리

- 사용자의 정체성 데이터
- 권한(Role)
- 인증 이후의 비즈니스 상태(포인트 등)




